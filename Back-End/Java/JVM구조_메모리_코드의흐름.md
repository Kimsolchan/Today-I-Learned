# JVM 구조, 메모리와 코드의 흐름
## 목표
### 1. JVM 구조를 파악
### 2. Java 코드의 메모리 흐름
### 3. 실습 코드를 통한 개념 정리 및 복습

## 확인사항
### 1. Java 코드의 실행과정을 이애한다.
### 2. JVM 구조 정리
### 3. 코드와 메모리를 연관 지어 설명할 수 있어여 한다.

# JVM(Java Virtual Machine)
- 직역 : ```자바를 실행하기 위한 가상 머신(컴퓨터)```
- Virtual Machine(가상 머신(컴퓨터))
  - 실제 컴퓨터(하드웨어)가 아닌 소프트 웨어로 구성된 컴퓨터(컴퓨터 안에 컴퓨터)
```
자바로 작성된 애플리케이션(main 함수 하위에서 작동되는 모든 것) 은 
모두 가상 컴퓨터(JVM) 에서만 실행되기 떼문에 자바 애플리케이션이 
실행되기 위해서는 반드시 JVM이 필요하다.
```

## 일반 애플리케이션 , 자바 애플리케이션의 차이
### 일반 애플리케이션
```
일반 애플리케이션 -> OS(운영체제) -> 컴퓨터(하드웨어)
```
일반 애플리케이션의 코드는 Os를 직접 거치고 하드웨어로 전달된다.

그리고, 일반 애플리케이션은 OS와 바로 맞붙어 있기 때문에 ```OS에 종속적이다.```

그래서 다른 OS에서 실행시키려면 해당 OS에 맞게 변경해야 한다.

### 자바 애플리케이션
```
자바 애플리케이션 -> JVM(자바 가상머신) -> OS(운영체제) -> 컴퓨터(하드웨어)
```
java 애플리케이션은 JVM을 한번 더 거치기 때문에 속도가 느리다는 단점이 있다.

요즘은 바이트 코드(컴파일된 자바 코드)를 하드웨어의 기계어로 바로 변환해주는

```JIT 컴파일러```와 향샹된 최적화 기술이 적용되어서 속도의 격차를 많이 줄였다고 한다.

Java 애플리케이션은 JVM 하고만 상호작용을 하기 때문에 OS와 하드웨어에 독립적이라

그리고, 다른 OS에서도 프로그램의 변경없이 실행이 가능하지만, 

JVM 은 OS에 종속적이기 때문에 해당 OS에서 실행가능한 JVM이 필요하다.
```
Java 애플리케이션 -> JVM(Windeow) -> OS(Window) -> 하드웨어

Java 애플리케이션 -> JVM(Linux) -> OS(Linux) -> 하드웨어
```

## JVM의 동작 원리
![JVM 동작 구조](https://user-images.githubusercontent.com/108924832/204783526-12654f51-9a3b-4128-a100-ba1bcc030f88.PNG)

1. App.java 파일을 작성한다.
2. java 컴파일러에서 java 파일을 byte code 라고 불리는 .class 파일로 번역한다.
3. JVM이 기계어 코드로 번역한다.
4. OS가 인식한 기게어 코드가 하드웨어로 전달한다.

-> 코드 실행(윈도우면 윈도우에 맞춰서 실행, 리눅스면 리눅스에 맞춰서 실행)

변환된 ```bytecode```는 기계어가 아니라서 OS에서 바로 실행되지 않는다.

이때, ```VM```이 OS가 bytecode를 이해할 수 있도록 해석해준다.

따라서 Byte Code는 JVM 위에서 OS 상관없이 실행될 수 있는 것이다.

OS에 종속적이지 않고, Java 파일 하나만 만들면 어느 디바이스든 JVM 위에서 실행할 수 있다.

## JVM 구조
```

```

## 용어 정리
### 컴파일(Compiler)
- 어떤 프로그래밍 언어로 쓰여진 소스 파일을 다른 프로그래밍 언어로 바꿔주는 과정
  - 위 과정을 자동으로 수행해주는 소프트웨어를 컴파일러라 부름

### 자바 컴파일러(Java compiler)
JDK를 설치하면 bin 폴더애 존재하는 ```javac.exe(실행 파일)```를 말하며

JDK에 Java compiler가 포함되어 있다, 자바 컴파일러는 자바를 가지고 작성한

자바 소스 코드를 자바 가상 머신이 이해할 수 있는 바이트 코드로 변환한다.

### 바이트 코드(bytecode)
자바 가성 머신이 이해할 수 있는 언어로 변환된 자바 소스 코드를 의미한다.

자바 컴파일러에 의해 변환되는 코드의 명령어 크기가 1바이트라서 바이트 코드가 불린다.

확장자는 ```.class``` 며, JVM만 설치되어 있으면 어디서든 실행 가능하다.

### 바이너리 코드
컴퓨터가 인식할 수 있는 0과 1로 구성된 이진코드를 말한다.

### 기계어
0 과 1로 이루어진 바이너 코드다

기게어가 이진코드로 이루어졌다고 해서 모든 이진코드가 기계어는 아니며

특정한 언어가 아니라 ```CPU가 이해하는 명령어 집합```이다(CPU 제조사마다 기계어가 다를 수 있음)
```
CPU가 이해하는 언어 : 바이너리 코드

JVM이 이해하는 코드 : 바이트 코드
```